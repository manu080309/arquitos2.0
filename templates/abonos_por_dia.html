{% extends "base.html" %}
{% block title %}ğŸ’° Abonos del DÃ­a{% endblock %}

{% block content %}
<div class="container mt-4">
  <!-- ğŸ§­ Encabezado -->
  <div class="d-flex justify-content-between align-items-center flex-wrap gap-2 mb-3">
    <h2 class="m-0">ğŸ“‹ Abonos del {{ fecha.strftime("%d/%m/%Y") }}</h2>
    <a href="{{ url_for('app_rutas.liquidaciones') }}" class="btn btn-outline-primary btn-sm">â¬…ï¸ Volver al Historial</a>
  </div>

  {% if abonos %}
  <!-- ğŸ“Š Tabla de abonos -->
  <table class="table table-bordered table-hover align-middle text-center shadow-sm">
    <thead class="table-dark">
      <tr>
        <th>ğŸ•’ Hora</th>
        <th>ğŸ‘¤ Cliente</th>
        <th>ğŸ’µ Monto</th>
      </tr>
    </thead>
    <tbody>
      {% for abono in abonos %}
      <tr>
        <td>{{ abono.fecha.strftime("%H:%M:%S") }}</td>
        <td>{{ abono.nombre }}</td>
        <td class="fw-bold text-success">${{ "%.2f"|format(abono.monto or 0) }}</td>
      </tr>
      {% endfor %}
      <tr class="table-light">
        <td colspan="2" class="fw-bold text-end">ğŸ’° Total del DÃ­a:</td>
        <td class="fw-bold text-success">${{ "%.2f"|format(total_abonos or 0) }}</td>
      </tr>
    </tbody>
  </table>
  {% else %}
  <!-- ğŸš« Sin registros -->
  <div class="alert alert-warning text-center mt-3 shadow-sm">
    âš ï¸ No se registraron abonos en esta fecha.
  </div>
  {% endif %}

  <!-- ğŸ•’ Hora actual -->
  <div class="text-end mt-4 text-muted">
    ğŸ•’ Hora actual: {{ hora_chile() }}
  </div>
</div>

<!-- ğŸ¨ Estilos adicionales -->
<style>
  .table td, .table th {
    vertical-align: middle;
  }
  .btn-outline-primary {
    border-radius: 8px;
  }
  .text-success {
    color: #198754 !important;
  }
  .shadow-sm {
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
  }
</style>
{% endblock %}
