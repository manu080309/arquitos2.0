{% extends "base.html" %}
{% block title %}ğŸ§¾ Gastos del {{ fecha.strftime("%d/%m/%Y") }}{% endblock %}

{% block content %}
<div class="container mt-4 mb-5">
  <!-- ğŸ§­ Encabezado -->
  <div class="d-flex justify-content-between align-items-center flex-wrap gap-2 mb-4">
    <h3 class="m-0">ğŸ§¾ Gastos del {{ fecha.strftime("%d/%m/%Y") }}</h3>
    <a href="{{ url_for('app_rutas.liquidacion_view') }}" class="btn btn-outline-secondary btn-sm">â¬…ï¸ Volver a LiquidaciÃ³n</a>
  </div>

  {% if gastos %}
  <!-- ğŸ“Š Tabla de gastos -->
  <div class="card shadow-sm">
    <div class="card-body p-0">
      <table class="table table-hover table-bordered align-middle text-center mb-0">
        <thead class="table-dark">
          <tr>
            <th>ğŸ’° Monto</th>
            <th>ğŸ“ DescripciÃ³n</th>
            <th>ğŸ•’ Fecha y Hora</th>
          </tr>
        </thead>
        <tbody>
          {% for g in gastos %}
          <tr>
            <td class="fw-bold text-danger">${{ "%.2f"|format(g.monto) }}</td>
            <td>{{ g.descripcion or "Sin descripciÃ³n" }}</td>
            <td>{{ g.fecha.strftime("%d/%m/%Y %H:%M") }}</td>
          </tr>
          {% endfor %}
          <tr class="table-light">
            <td colspan="2" class="fw-bold text-end">ğŸ’¸ Total Gastos:</td>
            <td class="fw-bold text-danger">${{ "%.2f"|format(total_gastos) }}</td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>

  {% else %}
  <!-- ğŸš« Sin registros -->
  <div class="alert alert-info text-center shadow-sm mt-3">
    âš ï¸ No se registraron gastos en esta fecha.
  </div>
  {% endif %}

  <!-- ğŸ•’ Hora actual -->
  <div class="text-end text-muted mt-4">
    ğŸ•’ Hora actual en Chile: <strong>{{ hora_chile() }}</strong>
  </div>
</div>

<!-- ğŸ¨ Estilos -->
<style>
  .table td, .table th { vertical-align: middle; }
  .table-dark th { background-color: #212529 !important; color: white !important; }
  .btn-outline-secondary { border-radius: 8px; }
  .shadow-sm { box-shadow: 0 2px 4px rgba(0,0,0,0.15) !important; }
  .fw-bold.text-danger { color: #dc3545 !important; }
</style>
{% endblock %}
