{% extends "base.html" %}
{% block title %}ğŸ“Š Dashboard â€” CrÃ©ditos{% endblock %}

{% block content %}
<div class="container mt-4 mb-5">
  <h2 class="text-center mb-4 fw-bold text-primary">ğŸ“Š Dashboard General del Sistema de CrÃ©ditos</h2>

  <!-- ğŸ“ˆ Tarjetas principales -->
  <div class="row g-4 justify-content-center">
    
    <!-- Total de Clientes Activos -->
    <div class="col-md-4 col-lg-3">
      <div class="card text-center p-3 shadow-sm border-0 bg-info text-white">
        <h6>ğŸ‘¥ Clientes Activos</h6>
        <h2 class="fw-bold">{{ total_clientes_activos }}</h2>
      </div>
    </div>

    <!-- Total Abonos -->
    <div class="col-md-4 col-lg-3">
      <div class="card text-center p-3 shadow-sm border-0 bg-success text-white">
        <h6>ğŸ’° Total Abonos del DÃ­a</h6>
        <h2 class="fw-bold">${{ "%.2f"|format(total_abonos) }}</h2>
      </div>
    </div>

    <!-- Total PrÃ©stamos -->
    <div class="col-md-4 col-lg-3">
      <div class="card text-center p-3 shadow-sm border-0 bg-danger text-white">
        <h6>ğŸ¦ Total PrÃ©stamos del DÃ­a</h6>
        <h2 class="fw-bold">${{ "%.2f"|format(total_prestamos) }}</h2>
      </div>
    </div>

    <!-- Entradas -->
    <div class="col-md-4 col-lg-3">
      <div class="card text-center p-3 shadow-sm border-0 bg-primary text-white">
        <h6>ğŸ“¥ Entradas Manuales</h6>
        <h2 class="fw-bold">${{ "%.2f"|format(total_entradas) }}</h2>
      </div>
    </div>

    <!-- Salidas -->
    <div class="col-md-4 col-lg-3">
      <div class="card text-center p-3 shadow-sm border-0 bg-warning text-dark">
        <h6>ğŸ“¤ Salidas de Efectivo</h6>
        <h2 class="fw-bold">${{ "%.2f"|format(total_salidas) }}</h2>
      </div>
    </div>

    <!-- Gastos -->
    <div class="col-md-4 col-lg-3">
      <div class="card text-center p-3 shadow-sm border-0 bg-secondary text-white">
        <h6>ğŸ§¾ Gastos del DÃ­a</h6>
        <h2 class="fw-bold">${{ "%.2f"|format(total_gastos) }}</h2>
      </div>
    </div>

    <!-- Caja Total -->
    <div class="col-md-4 col-lg-3">
      <div class="card text-center p-3 shadow-sm border-0 
           {% if caja_total >= 0 %}bg-success{% else %}bg-danger{% endif %} text-white">
        <h6>ğŸ’¼ Caja Total del DÃ­a</h6>
        <h2 class="fw-bold">${{ "%.2f"|format(caja_total) }}</h2>
      </div>
    </div>
  </div>

  <!-- ğŸ•’ Hora actual -->
  <div class="text-center mt-5">
    <hr>
    <p class="text-muted">
      ğŸ•’ Hora actual en Chile: <strong>{{ hora_actual() }}</strong><br>
      ğŸ“… Fecha del sistema: <strong>{{ hoy.strftime("%d-%m-%Y") }}</strong>
    </p>
  </div>
</div>

<style>
  .card h6 { font-weight: 500; margin-bottom: .4rem; }
  .card h2 { font-size: 1.8rem; }
  .shadow-sm { box-shadow: 0 2px 4px rgba(0,0,0,0.15) !important; }
</style>
{% endblock %}
