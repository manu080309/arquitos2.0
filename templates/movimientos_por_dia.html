{% extends "base.html" %}
{% block title %}{{ titulo }}{% endblock %}

{% block content %}
<div class="container mt-4">
  <!-- Encabezado -->
  <div class="card shadow-sm mb-4">
    <div class="card-body text-center">
      <h4 class="card-title mb-2">{{ titulo }}</h4>
      <h6 class="text-muted">üìÖ Fecha: {{ fecha.strftime("%d/%m/%Y") }}</h6>
      <p class="text-muted mb-0">üïí Hora actual en Chile: {{ hora_actual() }}</p>
    </div>
  </div>

  <!-- Tabla de movimientos -->
  <div class="table-responsive">
    <table class="table table-bordered table-hover text-center align-middle shadow-sm">
      <thead class="table-dark">
        <tr>
          <th>Fecha y Hora</th>
          {% if tipo == 'abono' %}
            <th>Cliente</th>
          {% else %}
            <th>Descripci√≥n</th>
          {% endif %}
          <th>Monto</th>
        </tr>
      </thead>
      <tbody>
        {% if movimientos %}
          {% for m in movimientos %}
            <tr>
              {% if tipo == 'abono' %}
                <td>{{ m[0].strftime("%d/%m/%Y %H:%M:%S") }}</td>
                <td>{{ m[1] }}</td>
                <td>${{ "%.2f"|format(m[2]) }}</td>
              {% else %}
                <td>{{ m.fecha.strftime("%d/%m/%Y %H:%M:%S") }}</td>
                <td>{{ m.descripcion or "‚Äî" }}</td>
                <td>${{ "%.2f"|format(m.monto) }}</td>
              {% endif %}
            </tr>
          {% endfor %}
        {% else %}
          <tr><td colspan="3" class="text-muted">No hay movimientos registrados.</td></tr>
        {% endif %}
      </tbody>
      <tfoot>
        <tr class="fw-bold table-light">
          <td colspan="2" class="text-end">Total {{ titulo }}</td>
          <td>${{ "%.2f"|format(total) }}</td>
        </tr>
      </tfoot>
    </table>
  </div>

  <!-- Bot√≥n volver -->
  <div class="text-center mt-4">
    <a href="{{ url_for('app_rutas.liquidacion_view') }}" class="btn btn-secondary">‚¨ÖÔ∏è Volver a Liquidaci√≥n</a>
  </div>
</div>

<!-- üé® Estilos -->
<style>
  .table td, .table th {
    vertical-align: middle;
  }
  .card {
    border-radius: 12px;
  }
  tfoot td {
    font-weight: 600;
  }
</style>
{% endblock %}
